digraph "CFG for '__map_single' function" {
	label="CFG for '__map_single' function";

	Node0x561b9494ce20 [shape=record,label="{-data2-yizhuo-inc-experiment-experiment-lll-v4.14-drivers-iommu-amd_iommu.llbc-_\l..._map_single-0:\l  %retval = alloca i64, align 8\l  %dev.addr = alloca %struct.device*, align 8\l  %dma_dom.addr = alloca %struct.dma_ops_domain*, align 8\l  %paddr.addr = alloca i64, align 8\l  %size.addr = alloca i64, align 8\l  %direction.addr = alloca i32, align 4\l  %dma_mask.addr = alloca i64, align 8\l  %offset = alloca i64, align 8\l  %address = alloca i64, align 8\l  %start = alloca i64, align 8\l  %ret = alloca i64, align 8\l  %pages = alloca i32, align 4\l  %prot = alloca i32, align 4\l  %i = alloca i32, align 4\l  store %struct.device* %dev, %struct.device** %dev.addr, align 8\l  call void @llvm.dbg.declare(metadata %struct.device** %dev.addr, metadata\l... !6072, metadata !DIExpression()), !dbg !6073\l  store %struct.dma_ops_domain* %dma_dom, %struct.dma_ops_domain**\l... %dma_dom.addr, align 8\l  call void @llvm.dbg.declare(metadata %struct.dma_ops_domain** %dma_dom.addr,\l... metadata !6074, metadata !DIExpression()), !dbg !6075\l  store i64 %paddr, i64* %paddr.addr, align 8\l  call void @llvm.dbg.declare(metadata i64* %paddr.addr, metadata !6076,\l... metadata !DIExpression()), !dbg !6077\l  store i64 %size, i64* %size.addr, align 8\l  call void @llvm.dbg.declare(metadata i64* %size.addr, metadata !6078,\l... metadata !DIExpression()), !dbg !6079\l  store i32 %direction, i32* %direction.addr, align 4\l  call void @llvm.dbg.declare(metadata i32* %direction.addr, metadata !6080,\l... metadata !DIExpression()), !dbg !6081\l  store i64 %dma_mask, i64* %dma_mask.addr, align 8\l  call void @llvm.dbg.declare(metadata i64* %dma_mask.addr, metadata !6082,\l... metadata !DIExpression()), !dbg !6083\l  call void @llvm.dbg.declare(metadata i64* %offset, metadata !6084, metadata\l... !DIExpression()), !dbg !6085\l  %0 = load i64, i64* %paddr.addr, align 8, !dbg !6086\l  %and = and i64 %0, 4095, !dbg !6087\l  store i64 %and, i64* %offset, align 8, !dbg !6085\l  call void @llvm.dbg.declare(metadata i64* %address, metadata !6088, metadata\l... !DIExpression()), !dbg !6089\l  call void @llvm.dbg.declare(metadata i64* %start, metadata !6090, metadata\l... !DIExpression()), !dbg !6091\l  call void @llvm.dbg.declare(metadata i64* %ret, metadata !6092, metadata\l... !DIExpression()), !dbg !6093\l  call void @llvm.dbg.declare(metadata i32* %pages, metadata !6094, metadata\l... !DIExpression()), !dbg !6095\l  call void @llvm.dbg.declare(metadata i32* %prot, metadata !6096, metadata\l... !DIExpression()), !dbg !6097\l  store i32 0, i32* %prot, align 4, !dbg !6097\l  call void @llvm.dbg.declare(metadata i32* %i, metadata !6098, metadata\l... !DIExpression()), !dbg !6099\l  %1 = load i64, i64* %paddr.addr, align 8, !dbg !6100\l  %2 = load i64, i64* %size.addr, align 8, !dbg !6101\l  %call = call i64 @iommu_num_pages(i64 %1, i64 %2, i64 4096) #8, !dbg !6102\l  %conv = trunc i64 %call to i32, !dbg !6102\l  store i32 %conv, i32* %pages, align 4, !dbg !6103\l  %3 = load i64, i64* %paddr.addr, align 8, !dbg !6104\l  %and1 = and i64 %3, -4096, !dbg !6104\l  store i64 %and1, i64* %paddr.addr, align 8, !dbg !6104\l  %4 = load %struct.device*, %struct.device** %dev.addr, align 8, !dbg !6105\l  %5 = load %struct.dma_ops_domain*, %struct.dma_ops_domain** %dma_dom.addr,\l... align 8, !dbg !6106\l  %6 = load i32, i32* %pages, align 4, !dbg !6107\l  %7 = load i64, i64* %dma_mask.addr, align 8, !dbg !6108\l  %call2 = call i64 @dma_ops_alloc_iova(%struct.device* %4,\l... %struct.dma_ops_domain* %5, i32 %6, i64 %7) #8, !dbg !6109\l  store i64 %call2, i64* %address, align 8, !dbg !6110\l  %8 = load i64, i64* %address, align 8, !dbg !6111\l  %cmp = icmp eq i64 %8, 0, !dbg !6113\l  br i1 %cmp, label\l... %-data2-yizhuo-inc-experiment-experiment-lll-v4.14-drivers-iommu-amd_iommu.llb\l...c-__map_single-1, label\l... %-data2-yizhuo-inc-experiment-experiment-lll-v4.14-drivers-iommu-amd_iommu.llb\l...c-__map_single-2, !dbg !6114\l|{<s0>T|<s1>F}}"];
	Node0x561b9494ce20:s0 -> Node0x561b9494dab0;
	Node0x561b9494ce20:s1 -> Node0x561b9494db00;
	Node0x561b9494dab0 [shape=record,label="{-data2-yizhuo-inc-experiment-experiment-lll-v4.14-drivers-iommu-amd_iommu.llbc-_\l..._map_single-1: \l  br label\l... %-data2-yizhuo-inc-experiment-experiment-lll-v4.14-drivers-iommu-amd_iommu.llb\l...c-__map_single-11, !dbg !6115\l}"];
	Node0x561b9494dab0 -> Node0x561b9494ddd0;
	Node0x561b9494db00 [shape=record,label="{-data2-yizhuo-inc-experiment-experiment-lll-v4.14-drivers-iommu-amd_iommu.llbc-_\l..._map_single-2: \l  %9 = load i32, i32* %direction.addr, align 4, !dbg !6116\l  %call4 = call i32 @dir2prot(i32 %9) #8, !dbg !6117\l  store i32 %call4, i32* %prot, align 4, !dbg !6118\l  %10 = load i64, i64* %address, align 8, !dbg !6119\l  store i64 %10, i64* %start, align 8, !dbg !6120\l  store i32 0, i32* %i, align 4, !dbg !6121\l  br label\l... %-data2-yizhuo-inc-experiment-experiment-lll-v4.14-drivers-iommu-amd_iommu.llb\l...c-__map_single-3, !dbg !6123\l}"];
	Node0x561b9494db00 -> Node0x561b9494db50;
	Node0x561b9494db50 [shape=record,label="{-data2-yizhuo-inc-experiment-experiment-lll-v4.14-drivers-iommu-amd_iommu.llbc-_\l..._map_single-3: \l  %11 = load i32, i32* %i, align 4, !dbg !6124\l  %12 = load i32, i32* %pages, align 4, !dbg !6126\l  %cmp5 = icmp ult i32 %11, %12, !dbg !6127\l  br i1 %cmp5, label\l... %-data2-yizhuo-inc-experiment-experiment-lll-v4.14-drivers-iommu-amd_iommu.llb\l...c-__map_single-4, label\l... %-data2-yizhuo-inc-experiment-experiment-lll-v4.14-drivers-iommu-amd_iommu.llb\l...c-__map_single-8, !dbg !6128\l|{<s0>T|<s1>F}}"];
	Node0x561b9494db50:s0 -> Node0x561b9494dba0;
	Node0x561b9494db50:s1 -> Node0x561b9494dce0;
	Node0x561b9494dba0 [shape=record,label="{-data2-yizhuo-inc-experiment-experiment-lll-v4.14-drivers-iommu-amd_iommu.llbc-_\l..._map_single-4: \l  %13 = load %struct.dma_ops_domain*, %struct.dma_ops_domain** %dma_dom.addr,\l... align 8, !dbg !6129\l  %domain = getelementptr inbounds %struct.dma_ops_domain,\l... %struct.dma_ops_domain* %13, i32 0, i32 0, !dbg !6131\l  %14 = load i64, i64* %start, align 8, !dbg !6132\l  %15 = load i64, i64* %paddr.addr, align 8, !dbg !6133\l  %16 = load i32, i32* %prot, align 4, !dbg !6134\l  %call7 = call i32 @iommu_map_page(%struct.protection_domain* %domain, i64\l... %14, i64 %15, i64 4096, i32 %16, i32 17301536) #8, !dbg !6135\l  %conv8 = sext i32 %call7 to i64, !dbg !6135\l  store i64 %conv8, i64* %ret, align 8, !dbg !6136\l  %17 = load i64, i64* %ret, align 8, !dbg !6137\l  %tobool = icmp ne i64 %17, 0, !dbg !6137\l  br i1 %tobool, label\l... %-data2-yizhuo-inc-experiment-experiment-lll-v4.14-drivers-iommu-amd_iommu.llb\l...c-__map_single-5, label\l... %-data2-yizhuo-inc-experiment-experiment-lll-v4.14-drivers-iommu-amd_iommu.llb\l...c-__map_single-6, !dbg !6139\l|{<s0>T|<s1>F}}"];
	Node0x561b9494dba0:s0 -> Node0x561b9494dbf0;
	Node0x561b9494dba0:s1 -> Node0x561b9494dc40;
	Node0x561b9494dbf0 [shape=record,label="{-data2-yizhuo-inc-experiment-experiment-lll-v4.14-drivers-iommu-amd_iommu.llbc-_\l..._map_single-5: \l  br label\l... %-data2-yizhuo-inc-experiment-experiment-lll-v4.14-drivers-iommu-amd_iommu.llb\l...c-__map_single-12, !dbg !6140\l}"];
	Node0x561b9494dbf0 -> Node0x561b9494de20;
	Node0x561b9494dc40 [shape=record,label="{-data2-yizhuo-inc-experiment-experiment-lll-v4.14-drivers-iommu-amd_iommu.llbc-_\l..._map_single-6: \l  %18 = load i64, i64* %paddr.addr, align 8, !dbg !6141\l  %add = add i64 %18, 4096, !dbg !6141\l  store i64 %add, i64* %paddr.addr, align 8, !dbg !6141\l  %19 = load i64, i64* %start, align 8, !dbg !6142\l  %add11 = add i64 %19, 4096, !dbg !6142\l  store i64 %add11, i64* %start, align 8, !dbg !6142\l  br label\l... %-data2-yizhuo-inc-experiment-experiment-lll-v4.14-drivers-iommu-amd_iommu.llb\l...c-__map_single-7, !dbg !6143\l}"];
	Node0x561b9494dc40 -> Node0x561b9494dc90;
	Node0x561b9494dc90 [shape=record,label="{-data2-yizhuo-inc-experiment-experiment-lll-v4.14-drivers-iommu-amd_iommu.llbc-_\l..._map_single-7: \l  %20 = load i32, i32* %i, align 4, !dbg !6144\l  %inc = add i32 %20, 1, !dbg !6144\l  store i32 %inc, i32* %i, align 4, !dbg !6144\l  br label\l... %-data2-yizhuo-inc-experiment-experiment-lll-v4.14-drivers-iommu-amd_iommu.llb\l...c-__map_single-3, !dbg !6145, !llvm.loop !6146\l}"];
	Node0x561b9494dc90 -> Node0x561b9494db50;
	Node0x561b9494dce0 [shape=record,label="{-data2-yizhuo-inc-experiment-experiment-lll-v4.14-drivers-iommu-amd_iommu.llbc-_\l..._map_single-8: \l  %21 = load i64, i64* %offset, align 8, !dbg !6148\l  %22 = load i64, i64* %address, align 8, !dbg !6149\l  %add12 = add i64 %22, %21, !dbg !6149\l  store i64 %add12, i64* %address, align 8, !dbg !6149\l  %23 = load i8, i8* @amd_iommu_np_cache, align 1, !dbg !6150\l  %tobool13 = trunc i8 %23 to i1, !dbg !6150\l  %lnot = xor i1 %tobool13, true, !dbg !6150\l  %lnot14 = xor i1 %lnot, true, !dbg !6150\l  %lnot.ext = zext i1 %lnot14 to i32, !dbg !6150\l  %conv15 = sext i32 %lnot.ext to i64, !dbg !6150\l  %tobool16 = icmp ne i64 %conv15, 0, !dbg !6150\l  br i1 %tobool16, label\l... %-data2-yizhuo-inc-experiment-experiment-lll-v4.14-drivers-iommu-amd_iommu.llb\l...c-__map_single-9, label\l... %-data2-yizhuo-inc-experiment-experiment-lll-v4.14-drivers-iommu-amd_iommu.llb\l...c-__map_single-10, !dbg !6152\l|{<s0>T|<s1>F}}"];
	Node0x561b9494dce0:s0 -> Node0x561b9494dd30;
	Node0x561b9494dce0:s1 -> Node0x561b9494dd80;
	Node0x561b9494dd30 [shape=record,label="{-data2-yizhuo-inc-experiment-experiment-lll-v4.14-drivers-iommu-amd_iommu.llbc-_\l..._map_single-9: \l  %24 = load %struct.dma_ops_domain*, %struct.dma_ops_domain** %dma_dom.addr,\l... align 8, !dbg !6153\l  %domain18 = getelementptr inbounds %struct.dma_ops_domain,\l... %struct.dma_ops_domain* %24, i32 0, i32 0, !dbg !6155\l  %25 = load i64, i64* %address, align 8, !dbg !6156\l  %26 = load i64, i64* %size.addr, align 8, !dbg !6157\l  call void @domain_flush_pages(%struct.protection_domain* %domain18, i64 %25,\l... i64 %26) #8, !dbg !6158\l  %27 = load %struct.dma_ops_domain*, %struct.dma_ops_domain** %dma_dom.addr,\l... align 8, !dbg !6159\l  %domain19 = getelementptr inbounds %struct.dma_ops_domain,\l... %struct.dma_ops_domain* %27, i32 0, i32 0, !dbg !6160\l  call void @domain_flush_complete(%struct.protection_domain* %domain19) #8,\l... !dbg !6161\l  br label\l... %-data2-yizhuo-inc-experiment-experiment-lll-v4.14-drivers-iommu-amd_iommu.llb\l...c-__map_single-10, !dbg !6162\l}"];
	Node0x561b9494dd30 -> Node0x561b9494dd80;
	Node0x561b9494dd80 [shape=record,label="{-data2-yizhuo-inc-experiment-experiment-lll-v4.14-drivers-iommu-amd_iommu.llbc-_\l..._map_single-10: \l  br label\l... %-data2-yizhuo-inc-experiment-experiment-lll-v4.14-drivers-iommu-amd_iommu.llb\l...c-__map_single-11, !dbg !6150\l}"];
	Node0x561b9494dd80 -> Node0x561b9494ddd0;
	Node0x561b9494ddd0 [shape=record,label="{-data2-yizhuo-inc-experiment-experiment-lll-v4.14-drivers-iommu-amd_iommu.llbc-_\l..._map_single-11: \l  call void @llvm.dbg.label(metadata !6163), !dbg !6164\l  %28 = load i64, i64* %address, align 8, !dbg !6165\l  store i64 %28, i64* %retval, align 8, !dbg !6166\l  br label\l... %-data2-yizhuo-inc-experiment-experiment-lll-v4.14-drivers-iommu-amd_iommu.llb\l...c-__map_single-17, !dbg !6166\l}"];
	Node0x561b9494ddd0 -> Node0x561b9494dfb0;
	Node0x561b9494de20 [shape=record,label="{-data2-yizhuo-inc-experiment-experiment-lll-v4.14-drivers-iommu-amd_iommu.llbc-_\l..._map_single-12: \l  call void @llvm.dbg.label(metadata !6167), !dbg !6168\l  %29 = load i32, i32* %i, align 4, !dbg !6169\l  %dec = add i32 %29, -1, !dbg !6169\l  store i32 %dec, i32* %i, align 4, !dbg !6169\l  br label\l... %-data2-yizhuo-inc-experiment-experiment-lll-v4.14-drivers-iommu-amd_iommu.llb\l...c-__map_single-13, !dbg !6169\l}"];
	Node0x561b9494de20 -> Node0x561b9494de70;
	Node0x561b9494de70 [shape=record,label="{-data2-yizhuo-inc-experiment-experiment-lll-v4.14-drivers-iommu-amd_iommu.llbc-_\l..._map_single-13: \l  %30 = load i32, i32* %i, align 4, !dbg !6171\l  %cmp22 = icmp sge i32 %30, 0, !dbg !6173\l  br i1 %cmp22, label\l... %-data2-yizhuo-inc-experiment-experiment-lll-v4.14-drivers-iommu-amd_iommu.llb\l...c-__map_single-14, label\l... %-data2-yizhuo-inc-experiment-experiment-lll-v4.14-drivers-iommu-amd_iommu.llb\l...c-__map_single-16, !dbg !6174\l|{<s0>T|<s1>F}}"];
	Node0x561b9494de70:s0 -> Node0x561b9494dec0;
	Node0x561b9494de70:s1 -> Node0x561b9494df60;
	Node0x561b9494dec0 [shape=record,label="{-data2-yizhuo-inc-experiment-experiment-lll-v4.14-drivers-iommu-amd_iommu.llbc-_\l..._map_single-14: \l  %31 = load i64, i64* %start, align 8, !dbg !6175\l  %sub = sub i64 %31, 4096, !dbg !6175\l  store i64 %sub, i64* %start, align 8, !dbg !6175\l  %32 = load %struct.dma_ops_domain*, %struct.dma_ops_domain** %dma_dom.addr,\l... align 8, !dbg !6177\l  %domain25 = getelementptr inbounds %struct.dma_ops_domain,\l... %struct.dma_ops_domain* %32, i32 0, i32 0, !dbg !6178\l  %33 = load i64, i64* %start, align 8, !dbg !6179\l  %call26 = call i64 @iommu_unmap_page(%struct.protection_domain* %domain25,\l... i64 %33, i64 4096) #8, !dbg !6180\l  br label\l... %-data2-yizhuo-inc-experiment-experiment-lll-v4.14-drivers-iommu-amd_iommu.llb\l...c-__map_single-15, !dbg !6181\l}"];
	Node0x561b9494dec0 -> Node0x561b9494df10;
	Node0x561b9494df10 [shape=record,label="{-data2-yizhuo-inc-experiment-experiment-lll-v4.14-drivers-iommu-amd_iommu.llbc-_\l..._map_single-15: \l  %34 = load i32, i32* %i, align 4, !dbg !6182\l  %dec28 = add i32 %34, -1, !dbg !6182\l  store i32 %dec28, i32* %i, align 4, !dbg !6182\l  br label\l... %-data2-yizhuo-inc-experiment-experiment-lll-v4.14-drivers-iommu-amd_iommu.llb\l...c-__map_single-13, !dbg !6183, !llvm.loop !6184\l}"];
	Node0x561b9494df10 -> Node0x561b9494de70;
	Node0x561b9494df60 [shape=record,label="{-data2-yizhuo-inc-experiment-experiment-lll-v4.14-drivers-iommu-amd_iommu.llbc-_\l..._map_single-16: \l  %35 = load %struct.dma_ops_domain*, %struct.dma_ops_domain** %dma_dom.addr,\l... align 8, !dbg !6186\l  %domain30 = getelementptr inbounds %struct.dma_ops_domain,\l... %struct.dma_ops_domain* %35, i32 0, i32 0, !dbg !6187\l  call void @domain_flush_tlb(%struct.protection_domain* %domain30) #8, !dbg\l... !6188\l  %36 = load %struct.dma_ops_domain*, %struct.dma_ops_domain** %dma_dom.addr,\l... align 8, !dbg !6189\l  %domain31 = getelementptr inbounds %struct.dma_ops_domain,\l... %struct.dma_ops_domain* %36, i32 0, i32 0, !dbg !6190\l  call void @domain_flush_complete(%struct.protection_domain* %domain31) #8,\l... !dbg !6191\l  %37 = load %struct.dma_ops_domain*, %struct.dma_ops_domain** %dma_dom.addr,\l... align 8, !dbg !6192\l  %38 = load i64, i64* %address, align 8, !dbg !6193\l  %39 = load i32, i32* %pages, align 4, !dbg !6194\l  call void @dma_ops_free_iova(%struct.dma_ops_domain* %37, i64 %38, i32 %39)\l... #8, !dbg !6195\l  store i64 0, i64* %retval, align 8, !dbg !6196\l  br label\l... %-data2-yizhuo-inc-experiment-experiment-lll-v4.14-drivers-iommu-amd_iommu.llb\l...c-__map_single-17, !dbg !6196\l}"];
	Node0x561b9494df60 -> Node0x561b9494dfb0;
	Node0x561b9494dfb0 [shape=record,label="{-data2-yizhuo-inc-experiment-experiment-lll-v4.14-drivers-iommu-amd_iommu.llbc-_\l..._map_single-17: \l  %40 = load i64, i64* %retval, align 8, !dbg !6197\l  ret i64 %40, !dbg !6197\l}"];
}
