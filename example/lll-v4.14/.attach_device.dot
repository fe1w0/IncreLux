digraph "CFG for 'attach_device' function" {
	label="CFG for 'attach_device' function";

	Node0x561b947cf960 [shape=record,label="{-data2-yizhuo-inc-experiment-experiment-lll-v4.14-drivers-iommu-amd_iommu.llbc-a\l...ttach_device-0:\l  %retval = alloca i32, align 4\l  %dev.addr = alloca %struct.device*, align 8\l  %domain.addr = alloca %struct.protection_domain*, align 8\l  %pdev = alloca %struct.pci_dev*, align 8\l  %dev_data = alloca %struct.iommu_dev_data*, align 8\l  %flags = alloca i64, align 8\l  %ret = alloca i32, align 4\l  %__mptr = alloca i8*, align 8\l  %tmp = alloca %struct.pci_dev*, align 8\l  %__dummy = alloca i64, align 8\l  %__dummy2 = alloca i64, align 8\l  %tmp29 = alloca i32, align 4\l  %__dummy34 = alloca i64, align 8\l  %__dummy235 = alloca i64, align 8\l  %tmp38 = alloca i32, align 4\l  store %struct.device* %dev, %struct.device** %dev.addr, align 8\l  call void @llvm.dbg.declare(metadata %struct.device** %dev.addr, metadata\l... !6072, metadata !DIExpression()), !dbg !6073\l  store %struct.protection_domain* %domain, %struct.protection_domain**\l... %domain.addr, align 8\l  call void @llvm.dbg.declare(metadata %struct.protection_domain**\l... %domain.addr, metadata !6074, metadata !DIExpression()), !dbg !6075\l  call void @llvm.dbg.declare(metadata %struct.pci_dev** %pdev, metadata\l... !6076, metadata !DIExpression()), !dbg !6077\l  call void @llvm.dbg.declare(metadata %struct.iommu_dev_data** %dev_data,\l... metadata !6078, metadata !DIExpression()), !dbg !6079\l  call void @llvm.dbg.declare(metadata i64* %flags, metadata !6080, metadata\l... !DIExpression()), !dbg !6081\l  call void @llvm.dbg.declare(metadata i32* %ret, metadata !6082, metadata\l... !DIExpression()), !dbg !6083\l  %0 = load %struct.device*, %struct.device** %dev.addr, align 8, !dbg !6084\l  %call = call %struct.iommu_dev_data* @get_dev_data(%struct.device* %0) #8,\l... !dbg !6085\l  store %struct.iommu_dev_data* %call, %struct.iommu_dev_data** %dev_data,\l... align 8, !dbg !6086\l  %1 = load %struct.device*, %struct.device** %dev.addr, align 8, !dbg !6087\l  %bus = getelementptr inbounds %struct.device, %struct.device* %1, i32 0, i32\l... 6, !dbg !6087\l  %2 = load %struct.bus_type*, %struct.bus_type** %bus, align 8, !dbg !6087\l  %cmp = icmp eq %struct.bus_type* %2, @pci_bus_type, !dbg !6087\l  br i1 %cmp, label\l... %-data2-yizhuo-inc-experiment-experiment-lll-v4.14-drivers-iommu-amd_iommu.llb\l...c-attach_device-2, label\l... %-data2-yizhuo-inc-experiment-experiment-lll-v4.14-drivers-iommu-amd_iommu.llb\l...c-attach_device-1, !dbg !6089\l|{<s0>T|<s1>F}}"];
	Node0x561b947cf960:s0 -> Node0x561b947d4e30;
	Node0x561b947cf960:s1 -> Node0x561b947d4de0;
	Node0x561b947d4de0 [shape=record,label="{-data2-yizhuo-inc-experiment-experiment-lll-v4.14-drivers-iommu-amd_iommu.llbc-a\l...ttach_device-1: \l  br label\l... %-data2-yizhuo-inc-experiment-experiment-lll-v4.14-drivers-iommu-amd_iommu.llb\l...c-attach_device-17, !dbg !6090\l}"];
	Node0x561b947d4de0 -> Node0x561b947d5ac0;
	Node0x561b947d4e30 [shape=record,label="{-data2-yizhuo-inc-experiment-experiment-lll-v4.14-drivers-iommu-amd_iommu.llbc-a\l...ttach_device-2: \l  call void @llvm.dbg.declare(metadata i8** %__mptr, metadata !6091, metadata\l... !DIExpression()), !dbg !6093\l  %3 = load %struct.device*, %struct.device** %dev.addr, align 8, !dbg !6093\l  %4 = bitcast %struct.device* %3 to i8*, !dbg !6093\l  store i8* %4, i8** %__mptr, align 8, !dbg !6093\l  br label\l... %-data2-yizhuo-inc-experiment-experiment-lll-v4.14-drivers-iommu-amd_iommu.llb\l...c-attach_device-3, !dbg !6093\l}"];
	Node0x561b947d4e30 -> Node0x561b947d4e80;
	Node0x561b947d4e80 [shape=record,label="{-data2-yizhuo-inc-experiment-experiment-lll-v4.14-drivers-iommu-amd_iommu.llbc-a\l...ttach_device-3: \l  br label\l... %-data2-yizhuo-inc-experiment-experiment-lll-v4.14-drivers-iommu-amd_iommu.llb\l...c-attach_device-4, !dbg !6094\l}"];
	Node0x561b947d4e80 -> Node0x561b947d4ed0;
	Node0x561b947d4ed0 [shape=record,label="{-data2-yizhuo-inc-experiment-experiment-lll-v4.14-drivers-iommu-amd_iommu.llbc-a\l...ttach_device-4: \l  %5 = load i8*, i8** %__mptr, align 8, !dbg !6093\l  %add.ptr = getelementptr i8, i8* %5, i64 -160, !dbg !6093\l  %6 = bitcast i8* %add.ptr to %struct.pci_dev*, !dbg !6093\l  store %struct.pci_dev* %6, %struct.pci_dev** %tmp, align 8, !dbg !6094\l  %7 = load %struct.pci_dev*, %struct.pci_dev** %tmp, align 8, !dbg !6093\l  store %struct.pci_dev* %7, %struct.pci_dev** %pdev, align 8, !dbg !6096\l  %8 = load %struct.protection_domain*, %struct.protection_domain**\l... %domain.addr, align 8, !dbg !6097\l  %flags1 = getelementptr inbounds %struct.protection_domain,\l... %struct.protection_domain* %8, i32 0, i32 10, !dbg !6099\l  %9 = load i64, i64* %flags1, align 8, !dbg !6099\l  %and = and i64 %9, 8, !dbg !6100\l  %tobool = icmp ne i64 %and, 0, !dbg !6100\l  br i1 %tobool, label\l... %-data2-yizhuo-inc-experiment-experiment-lll-v4.14-drivers-iommu-amd_iommu.llb\l...c-attach_device-5, label\l... %-data2-yizhuo-inc-experiment-experiment-lll-v4.14-drivers-iommu-amd_iommu.llb\l...c-attach_device-12, !dbg !6101\l|{<s0>T|<s1>F}}"];
	Node0x561b947d4ed0:s0 -> Node0x561b947d5700;
	Node0x561b947d4ed0:s1 -> Node0x561b947d5930;
	Node0x561b947d5700 [shape=record,label="{-data2-yizhuo-inc-experiment-experiment-lll-v4.14-drivers-iommu-amd_iommu.llbc-a\l...ttach_device-5: \l  %10 = load %struct.iommu_dev_data*, %struct.iommu_dev_data** %dev_data,\l... align 8, !dbg !6102\l  %passthrough = getelementptr inbounds %struct.iommu_dev_data,\l... %struct.iommu_dev_data* %10, i32 0, i32 6, !dbg !6105\l  %11 = load i8, i8* %passthrough, align 1, !dbg !6105\l  %tobool3 = trunc i8 %11 to i1, !dbg !6105\l  br i1 %tobool3, label\l... %-data2-yizhuo-inc-experiment-experiment-lll-v4.14-drivers-iommu-amd_iommu.llb\l...c-attach_device-7, label\l... %-data2-yizhuo-inc-experiment-experiment-lll-v4.14-drivers-iommu-amd_iommu.llb\l...c-attach_device-6, !dbg !6106\l|{<s0>T|<s1>F}}"];
	Node0x561b947d5700:s0 -> Node0x561b947d57a0;
	Node0x561b947d5700:s1 -> Node0x561b947d5750;
	Node0x561b947d5750 [shape=record,label="{-data2-yizhuo-inc-experiment-experiment-lll-v4.14-drivers-iommu-amd_iommu.llbc-a\l...ttach_device-6: \l  store i32 -22, i32* %retval, align 4, !dbg !6107\l  br label\l... %-data2-yizhuo-inc-experiment-experiment-lll-v4.14-drivers-iommu-amd_iommu.llb\l...c-attach_device-22, !dbg !6107\l}"];
	Node0x561b947d5750 -> Node0x561b947d5c50;
	Node0x561b947d57a0 [shape=record,label="{-data2-yizhuo-inc-experiment-experiment-lll-v4.14-drivers-iommu-amd_iommu.llbc-a\l...ttach_device-7: \l  %12 = load %struct.iommu_dev_data*, %struct.iommu_dev_data** %dev_data,\l... align 8, !dbg !6108\l  %iommu_v2 = getelementptr inbounds %struct.iommu_dev_data,\l... %struct.iommu_dev_data* %12, i32 0, i32 5, !dbg !6110\l  %13 = load i8, i8* %iommu_v2, align 4, !dbg !6110\l  %tobool6 = trunc i8 %13 to i1, !dbg !6110\l  br i1 %tobool6, label\l... %-data2-yizhuo-inc-experiment-experiment-lll-v4.14-drivers-iommu-amd_iommu.llb\l...c-attach_device-8, label\l... %-data2-yizhuo-inc-experiment-experiment-lll-v4.14-drivers-iommu-amd_iommu.llb\l...c-attach_device-11, !dbg !6111\l|{<s0>T|<s1>F}}"];
	Node0x561b947d57a0:s0 -> Node0x561b947d57f0;
	Node0x561b947d57a0:s1 -> Node0x561b947d58e0;
	Node0x561b947d57f0 [shape=record,label="{-data2-yizhuo-inc-experiment-experiment-lll-v4.14-drivers-iommu-amd_iommu.llbc-a\l...ttach_device-8: \l  %14 = load %struct.pci_dev*, %struct.pci_dev** %pdev, align 8, !dbg !6112\l  %call8 = call i32 @pdev_iommuv2_enable(%struct.pci_dev* %14) #8, !dbg !6115\l  %cmp9 = icmp ne i32 %call8, 0, !dbg !6116\l  br i1 %cmp9, label\l... %-data2-yizhuo-inc-experiment-experiment-lll-v4.14-drivers-iommu-amd_iommu.llb\l...c-attach_device-9, label\l... %-data2-yizhuo-inc-experiment-experiment-lll-v4.14-drivers-iommu-amd_iommu.llb\l...c-attach_device-10, !dbg !6117\l|{<s0>T|<s1>F}}"];
	Node0x561b947d57f0:s0 -> Node0x561b947d5840;
	Node0x561b947d57f0:s1 -> Node0x561b947d5890;
	Node0x561b947d5840 [shape=record,label="{-data2-yizhuo-inc-experiment-experiment-lll-v4.14-drivers-iommu-amd_iommu.llbc-a\l...ttach_device-9: \l  store i32 -22, i32* %retval, align 4, !dbg !6118\l  br label\l... %-data2-yizhuo-inc-experiment-experiment-lll-v4.14-drivers-iommu-amd_iommu.llb\l...c-attach_device-22, !dbg !6118\l}"];
	Node0x561b947d5840 -> Node0x561b947d5c50;
	Node0x561b947d5890 [shape=record,label="{-data2-yizhuo-inc-experiment-experiment-lll-v4.14-drivers-iommu-amd_iommu.llbc-a\l...ttach_device-10: \l  %15 = load %struct.iommu_dev_data*, %struct.iommu_dev_data** %dev_data,\l... align 8, !dbg !6119\l  %ats = getelementptr inbounds %struct.iommu_dev_data,\l... %struct.iommu_dev_data* %15, i32 0, i32 7, !dbg !6120\l  %enabled = getelementptr inbounds %struct.anon.56, %struct.anon.56* %ats,\l... i32 0, i32 0, !dbg !6121\l  store i8 1, i8* %enabled, align 8, !dbg !6122\l  %16 = load %struct.pci_dev*, %struct.pci_dev** %pdev, align 8, !dbg !6123\l  %call12 = call i32 @pci_ats_queue_depth(%struct.pci_dev* %16) #8, !dbg !6124\l  %17 = load %struct.iommu_dev_data*, %struct.iommu_dev_data** %dev_data,\l... align 8, !dbg !6125\l  %ats13 = getelementptr inbounds %struct.iommu_dev_data,\l... %struct.iommu_dev_data* %17, i32 0, i32 7, !dbg !6126\l  %qdep = getelementptr inbounds %struct.anon.56, %struct.anon.56* %ats13, i32\l... 0, i32 1, !dbg !6127\l  store i32 %call12, i32* %qdep, align 4, !dbg !6128\l  %18 = load %struct.pci_dev*, %struct.pci_dev** %pdev, align 8, !dbg !6129\l  %call14 = call zeroext i1 @pci_pri_tlp_required(%struct.pci_dev* %18) #8,\l... !dbg !6130\l  %19 = load %struct.iommu_dev_data*, %struct.iommu_dev_data** %dev_data,\l... align 8, !dbg !6131\l  %pri_tlp = getelementptr inbounds %struct.iommu_dev_data,\l... %struct.iommu_dev_data* %19, i32 0, i32 8, !dbg !6132\l  %frombool = zext i1 %call14 to i8, !dbg !6133\l  store i8 %frombool, i8* %pri_tlp, align 8, !dbg !6133\l  br label\l... %-data2-yizhuo-inc-experiment-experiment-lll-v4.14-drivers-iommu-amd_iommu.llb\l...c-attach_device-11, !dbg !6134\l}"];
	Node0x561b947d5890 -> Node0x561b947d58e0;
	Node0x561b947d58e0 [shape=record,label="{-data2-yizhuo-inc-experiment-experiment-lll-v4.14-drivers-iommu-amd_iommu.llbc-a\l...ttach_device-11: \l  br label\l... %-data2-yizhuo-inc-experiment-experiment-lll-v4.14-drivers-iommu-amd_iommu.llb\l...c-attach_device-16, !dbg !6135\l}"];
	Node0x561b947d58e0 -> Node0x561b947d5a70;
	Node0x561b947d5930 [shape=record,label="{-data2-yizhuo-inc-experiment-experiment-lll-v4.14-drivers-iommu-amd_iommu.llbc-a\l...ttach_device-12: \l  %20 = load i8, i8* @amd_iommu_iotlb_sup, align 1, !dbg !6136\l  %tobool16 = trunc i8 %20 to i1, !dbg !6136\l  br i1 %tobool16, label\l... %-data2-yizhuo-inc-experiment-experiment-lll-v4.14-drivers-iommu-amd_iommu.llb\l...c-attach_device-13, label\l... %-data2-yizhuo-inc-experiment-experiment-lll-v4.14-drivers-iommu-amd_iommu.llb\l...c-attach_device-15, !dbg !6138\l|{<s0>T|<s1>F}}"];
	Node0x561b947d5930:s0 -> Node0x561b947d5980;
	Node0x561b947d5930:s1 -> Node0x561b947d5a20;
	Node0x561b947d5980 [shape=record,label="{-data2-yizhuo-inc-experiment-experiment-lll-v4.14-drivers-iommu-amd_iommu.llbc-a\l...ttach_device-13: \l  %21 = load %struct.pci_dev*, %struct.pci_dev** %pdev, align 8, !dbg !6139\l  %call17 = call i32 @pci_enable_ats(%struct.pci_dev* %21, i32 12) #8, !dbg\l... !6140\l  %cmp18 = icmp eq i32 %call17, 0, !dbg !6141\l  br i1 %cmp18, label\l... %-data2-yizhuo-inc-experiment-experiment-lll-v4.14-drivers-iommu-amd_iommu.llb\l...c-attach_device-14, label\l... %-data2-yizhuo-inc-experiment-experiment-lll-v4.14-drivers-iommu-amd_iommu.llb\l...c-attach_device-15, !dbg !6142\l|{<s0>T|<s1>F}}"];
	Node0x561b947d5980:s0 -> Node0x561b947d59d0;
	Node0x561b947d5980:s1 -> Node0x561b947d5a20;
	Node0x561b947d59d0 [shape=record,label="{-data2-yizhuo-inc-experiment-experiment-lll-v4.14-drivers-iommu-amd_iommu.llbc-a\l...ttach_device-14: \l  %22 = load %struct.iommu_dev_data*, %struct.iommu_dev_data** %dev_data,\l... align 8, !dbg !6143\l  %ats20 = getelementptr inbounds %struct.iommu_dev_data,\l... %struct.iommu_dev_data* %22, i32 0, i32 7, !dbg !6145\l  %enabled21 = getelementptr inbounds %struct.anon.56, %struct.anon.56*\l... %ats20, i32 0, i32 0, !dbg !6146\l  store i8 1, i8* %enabled21, align 8, !dbg !6147\l  %23 = load %struct.pci_dev*, %struct.pci_dev** %pdev, align 8, !dbg !6148\l  %call22 = call i32 @pci_ats_queue_depth(%struct.pci_dev* %23) #8, !dbg !6149\l  %24 = load %struct.iommu_dev_data*, %struct.iommu_dev_data** %dev_data,\l... align 8, !dbg !6150\l  %ats23 = getelementptr inbounds %struct.iommu_dev_data,\l... %struct.iommu_dev_data* %24, i32 0, i32 7, !dbg !6151\l  %qdep24 = getelementptr inbounds %struct.anon.56, %struct.anon.56* %ats23,\l... i32 0, i32 1, !dbg !6152\l  store i32 %call22, i32* %qdep24, align 4, !dbg !6153\l  br label\l... %-data2-yizhuo-inc-experiment-experiment-lll-v4.14-drivers-iommu-amd_iommu.llb\l...c-attach_device-15, !dbg !6154\l}"];
	Node0x561b947d59d0 -> Node0x561b947d5a20;
	Node0x561b947d5a20 [shape=record,label="{-data2-yizhuo-inc-experiment-experiment-lll-v4.14-drivers-iommu-amd_iommu.llbc-a\l...ttach_device-15: \l  br label\l... %-data2-yizhuo-inc-experiment-experiment-lll-v4.14-drivers-iommu-amd_iommu.llb\l...c-attach_device-16\l}"];
	Node0x561b947d5a20 -> Node0x561b947d5a70;
	Node0x561b947d5a70 [shape=record,label="{-data2-yizhuo-inc-experiment-experiment-lll-v4.14-drivers-iommu-amd_iommu.llbc-a\l...ttach_device-16: \l  br label\l... %-data2-yizhuo-inc-experiment-experiment-lll-v4.14-drivers-iommu-amd_iommu.llb\l...c-attach_device-17, !dbg !6155\l}"];
	Node0x561b947d5a70 -> Node0x561b947d5ac0;
	Node0x561b947d5ac0 [shape=record,label="{-data2-yizhuo-inc-experiment-experiment-lll-v4.14-drivers-iommu-amd_iommu.llbc-a\l...ttach_device-17: \l  call void @llvm.dbg.label(metadata !6156), !dbg !6157\l  br label\l... %-data2-yizhuo-inc-experiment-experiment-lll-v4.14-drivers-iommu-amd_iommu.llb\l...c-attach_device-18, !dbg !6158\l}"];
	Node0x561b947d5ac0 -> Node0x561b947d5b10;
	Node0x561b947d5b10 [shape=record,label="{-data2-yizhuo-inc-experiment-experiment-lll-v4.14-drivers-iommu-amd_iommu.llbc-a\l...ttach_device-18: \l  call void @llvm.dbg.declare(metadata i64* %__dummy, metadata !6159, metadata\l... !DIExpression()), !dbg !6162\l  call void @llvm.dbg.declare(metadata i64* %__dummy2, metadata !6163,\l... metadata !DIExpression()), !dbg !6162\l  %cmp28 = icmp eq i64* %__dummy, %__dummy2, !dbg !6162\l  %conv = zext i1 %cmp28 to i32, !dbg !6162\l  store i32 1, i32* %tmp29, align 4, !dbg !6162\l  %25 = load i32, i32* %tmp29, align 4, !dbg !6162\l  %call30 = call i64 @_raw_write_lock_irqsave(%struct.rwlock_t*\l... @amd_iommu_devtable_lock) #8, !dbg !6164\l  store i64 %call30, i64* %flags, align 8, !dbg !6164\l  br label\l... %-data2-yizhuo-inc-experiment-experiment-lll-v4.14-drivers-iommu-amd_iommu.llb\l...c-attach_device-19, !dbg !6164\l}"];
	Node0x561b947d5b10 -> Node0x561b947d5b60;
	Node0x561b947d5b60 [shape=record,label="{-data2-yizhuo-inc-experiment-experiment-lll-v4.14-drivers-iommu-amd_iommu.llbc-a\l...ttach_device-19: \l  %26 = load %struct.iommu_dev_data*, %struct.iommu_dev_data** %dev_data,\l... align 8, !dbg !6165\l  %27 = load %struct.protection_domain*, %struct.protection_domain**\l... %domain.addr, align 8, !dbg !6166\l  %call32 = call i32 @__attach_device(%struct.iommu_dev_data* %26,\l... %struct.protection_domain* %27) #8, !dbg !6167\l  store i32 %call32, i32* %ret, align 4, !dbg !6168\l  br label\l... %-data2-yizhuo-inc-experiment-experiment-lll-v4.14-drivers-iommu-amd_iommu.llb\l...c-attach_device-20, !dbg !6169\l}"];
	Node0x561b947d5b60 -> Node0x561b947d5bb0;
	Node0x561b947d5bb0 [shape=record,label="{-data2-yizhuo-inc-experiment-experiment-lll-v4.14-drivers-iommu-amd_iommu.llbc-a\l...ttach_device-20: \l  call void @llvm.dbg.declare(metadata i64* %__dummy34, metadata !6170,\l... metadata !DIExpression()), !dbg !6173\l  call void @llvm.dbg.declare(metadata i64* %__dummy235, metadata !6174,\l... metadata !DIExpression()), !dbg !6173\l  %cmp36 = icmp eq i64* %__dummy34, %__dummy235, !dbg !6173\l  %conv37 = zext i1 %cmp36 to i32, !dbg !6173\l  store i32 1, i32* %tmp38, align 4, !dbg !6173\l  %28 = load i32, i32* %tmp38, align 4, !dbg !6173\l  %29 = load i64, i64* %flags, align 8, !dbg !6175\l  call void @_raw_write_unlock_irqrestore(%struct.rwlock_t*\l... @amd_iommu_devtable_lock, i64 %29) #8, !dbg !6175\l  br label\l... %-data2-yizhuo-inc-experiment-experiment-lll-v4.14-drivers-iommu-amd_iommu.llb\l...c-attach_device-21, !dbg !6175\l}"];
	Node0x561b947d5bb0 -> Node0x561b947d5c00;
	Node0x561b947d5c00 [shape=record,label="{-data2-yizhuo-inc-experiment-experiment-lll-v4.14-drivers-iommu-amd_iommu.llbc-a\l...ttach_device-21: \l  %30 = load %struct.protection_domain*, %struct.protection_domain**\l... %domain.addr, align 8, !dbg !6176\l  call void @domain_flush_tlb_pde(%struct.protection_domain* %30) #8, !dbg\l... !6177\l  %31 = load i32, i32* %ret, align 4, !dbg !6178\l  store i32 %31, i32* %retval, align 4, !dbg !6179\l  br label\l... %-data2-yizhuo-inc-experiment-experiment-lll-v4.14-drivers-iommu-amd_iommu.llb\l...c-attach_device-22, !dbg !6179\l}"];
	Node0x561b947d5c00 -> Node0x561b947d5c50;
	Node0x561b947d5c50 [shape=record,label="{-data2-yizhuo-inc-experiment-experiment-lll-v4.14-drivers-iommu-amd_iommu.llbc-a\l...ttach_device-22: \l  %32 = load i32, i32* %retval, align 4, !dbg !6180\l  ret i32 %32, !dbg !6180\l}"];
}
